@model ListaPaginaMiradouros

@{
	//Layout = "_Layout";
	ViewData["Title"] = "Paisagens";
}
@*localhost:44369/Ambiente/Paisagens*@

<section class="wrapper style3 container special">

	<header class="major">
		<h2>Paisagens </h2>
		<p>
			Há paisagens um pouco por todo o mundo que são incriveis e quase totalmente desconhecidas,
			<br />outras passamos por elas vezes sem conta e nem reparamos.
		</p>
	</header>
	<body>
		<div class="row centrado">
			@{
				int i = 0;//ver
				int contagem = 0;
				int contamiradouro = 0;
				@foreach (var paisagem in Model.MiradouroPaisagem)
				{
					<div class="column" style="margin:1%">
						@{
							contamiradouro++;
							var base64 = Convert.ToBase64String(paisagem.Fotografia);
							var imgsrc = string.Format("data:image/gif; base64,{0}", base64);
							<img src='@imgsrc' style="width:100%" onclick="document.getElementById('id+@paisagem.MiradouroId').style.display='block', currentmiradouro(@contamiradouro)" class="hover-shadow cursor" />
							@*<img src='@imgsrc' style="width:100%" onclick="openModal();currentSlide(1);" class="hover-shadow cursor">*@
							@Html.DisplayFor(m => paisagem.Nome);
						}

						<div id="id+@paisagem.MiradouroId" class="modal">
							<span class="close cursor" onclick="document.getElementById('id+@paisagem.MiradouroId').style.display='none'">&times;</span>
							<form class="modal-content">
								<div class="caption-container">
									<p>@paisagem.Nome</p>
								</div>
								<div class="rowslide">
									@{
										foreach (var fotografiasslide in Model.Fotografias.Where(p => p.MiradouroId == paisagem.MiradouroId))
										{
											var base64Slide = Convert.ToBase64String(fotografiasslide.Fotografia);
											var imgsrcSlide = string.Format("data:image/gif; base64,{0}", base64Slide);
											contagem++;
											<div class="columnslide">
												<img src='@imgsrcSlide' style="width:100%; max-height:110px" alt="@fotografiasslide.FotoId" class="hover-shadow demo cursor" onclick="currentSlide(@contagem, @contamiradouro)" />
												<p>@fotografiasslide.FotoId</p>
											</div>
										}
									}
								</div>
								<div class="container">
									@foreach (var fotografiaAtual in Model.Fotografias.Where(p => p.MiradouroId == paisagem.MiradouroId))
									{
										var base64Atual = Convert.ToBase64String(fotografiaAtual.Fotografia);
										var imgsrcAtual = string.Format("data:image/gif; base64,{0}", base64Atual);
										<div class="mySlides">
											@*<div class="numbertext">@Html.Encode(controlo) / 5</div>*@
											<img src='@imgsrcAtual' style="width:100%">
											<p>@fotografiaAtual.FotoId</p>
										</div>
									}
									<a class="prev" onclick="plusSlides(-1, @contamiradouro)">❮</a>
									<a class="next" onclick="plusSlides(1, @contamiradouro)">❯</a>

									<div class="caption-container">
										<p id="caption"></p>
									</div>
								</div>

								<div class="descricaoimg">
									<p>
										Localização:
										@Html.DisplayFor(modelItem => paisagem.Localizacao)
									</p>
									<p>
										Coordenadas GPS:
										@Html.DisplayFor(modelItem => paisagem.Coordenadas_gps)
									</p>
									<p>
										Terreno:
										@Html.DisplayFor(modelItem => paisagem.Terreno)
									</p>
									<p>
										Condições:
										@Html.DisplayFor(modelItem => paisagem.Condicoes)
									</p>
									<p>
										Ocupação maxima:
										@Html.DisplayFor(modelItem => paisagem.Ocupacao_maxima)
									</p>
									<p>
										Descrição:
										@Html.DisplayFor(modelItem => paisagem.Descricao)
									</p>
								</div>
							</form>
						</div>
					</div>
				}
			}
		</div>

		<!--<div class="column" style="margin:1%">
		<img src="~/apresentacao/imagens/guarda1.jpg" style="width:100%" onclick="openModal();currentSlide(1);" class="hover-shadow cursor">
	</div>
	</div>-->

		@*<div id="myModal" class="modal">
			<span class="close cursor" onclick="closeModal()">&times;</span>
			<div class="modal-content">

				<!--interacao com a funcao titulo-->
				<div class="caption-container">
					<p class="tituloimg" id="caption"></p>
				</div>

				<!-- imagens slider -->
				<div class="mySlides">
					<!--<div class="numbertext">1 / 4</div>-->
					<img class="demo" src="~/apresentacao/imagens/guarda1.jpg" style="width:100%" alt="Um ponto de vista diferente!">
					<div class="descricaoimg">
						<p>
							Nesta imagem podemos ver a sé e parte da cidade de uma prespetiva diferente do abitual.
						</p>
					</div>
				</div>

				<div class="mySlides">
					<!--<div class="numbertext">2 / 4</div>-->
					<img class="demo" src="~/apresentacao/imagens/guarda2.jpg" style="width:100%" alt="Por vezes a cidade acorda pintada de branco">
					<div class="descricaoimg">
						<p>
							Um divertimento para as crianças que estão em casa ou na escola, um desafio para quem tem que ir trabalhar.
						</p>
					</div>
				</div>

				<div class="mySlides">
					<!--<div class="numbertext">3 / 4</div>-->
					<img class="demo" src="~/apresentacao/imagens/guarda3.jpg" style="width:100%" alt="Igreja de S. Vicente">
					<div class="descricaoimg">
						<p>
							Em tempos complicados, à quem diga que é a fé que nos salva.
						</p>
					</div>
				</div>

				<div class="mySlides">
					<!--<div class="numbertext">4 / 4</div>-->
					<img class="demo" src="~/apresentacao/imagens/guarda4.jpg" style="width:100%" alt="Recordar é viver">
					<div class="descricaoimg">
						<p>
							Em tempos à frente do principal monumento da cidade estava o D. Sancho.
						</p>
					</div>
				</div>

				<div class="mySlides">
					<!--<div class="numbertext">4 / 4</div>-->
					<img class="demo" src="~/apresentacao/imagens/guarda5.jpg" style="width:100%" alt="Recordar é viver">
					<div class="descricaoimg">
						<p>
							Algures na cidade da Guarda em tempos muito antigos.
						</p>
					</div>
				</div>

				<div class="mySlides">
					<!--<div class="numbertext">4 / 4</div>-->
					<img class="demo" src="~/apresentacao/imagens/guarda6.jpg" style="width:100%" alt="Uma vista unica">
					<div class="descricaoimg">
						<p>
							A cidade tem vistas que quase desconhecemos e que são tão bonitas.
						</p>

					</div>
				</div>

				<!--Butoes-->
				<a class="prev" onclick="plusSlides(-1)">&#10094;</a>
				<a class="next" onclick="plusSlides(1)">&#10095;</a>



				<!--barra com imagens-->
				<!--
			<div class="column">
			  <img class="demo cursor" src="img_nature_wide.jpg" style="width:100%" onclick="currentSlide(1)" alt="Nature and sunrise">
			</div>
			<div class="column">
			  <img class="demo cursor" src="img_snow_wide.jpg" style="width:100%" onclick="currentSlide(2)" alt="Snow">
			</div>
			<div class="column">
			  <img class="demo cursor" src="img_mountains_wide.jpg" style="width:100%" onclick="currentSlide(3)" alt="Mountains and fjords">
			</div>
			<div class="column">
			  <img class="demo cursor" src="img_lights_wide.jpg" style="width:100%" onclick="currentSlide(4)" alt="Northern Lights">
			</div>-->
			</div>
		</div>
			*@
		<nav>
			<ul class="pagination">
				@{
					if (Model.pagination.TotalPages > 1)
					{
						if (Model.pagination.CurrentPage == 1)
						{
							<li class="page-item"><a class="page-link active" asp-action="Paisagens" asp-route-page="1">1</a></li>
						}
						else
						{
							<li class="page-item"><a class="page-link" asp-action="Paisagens" asp-route-page="1">1</a></li>
						}



						int primeiraPagina = Model.pagination.CurrentPage - PagingInfoMiradouro.NUMERO_ANTES;
						if (primeiraPagina < 1)
						{
							primeiraPagina = 1;
						}

						int ultimaPagina = Model.pagination.CurrentPage + PagingInfoMiradouro.NUMERO_ANTES;
						if (ultimaPagina > Model.pagination.TotalPages)
						{
							ultimaPagina = Model.pagination.TotalPages;
						}

						@for (int p = primeiraPagina + 1; p < ultimaPagina; p++)
						{
							if (p == Model.pagination.CurrentPage)
							{
								<li class="page-item"><a class="page-link active" href="#">@p</a></li>
							}
							else
							{
								<li class="page-item"><a class="page-link" asp-action="Paisagens" asp-route-page="@p">@p</a></li>
							}
						}

						if (Model.pagination.CurrentPage == Model.pagination.TotalPages)
						{
							<li class="page-item"><a class="page-link active" asp-action="Paisagens" asp-route-page="@Model.pagination.TotalPages">@Model.pagination.TotalPages</a></li>
						}
						else
						{
							<li class="page-item"><a class="page-link" asp-action="Paisagens" asp-route-page="@Model.pagination.TotalPages">@Model.pagination.TotalPages</a></li>
						}

					}
				}
			</ul>
		</nav>
	</body>
	<footer class="major">
	</footer>
</section>

